<head>
  <title>Boxadder</title>
</head>

<body>
	
  <div id="outer">		
		{{> newBoxButton }}
		
		{{> boxContainer }}
		
		{{> board }}
  </div>
</body>

<template name="board">
  <div class="board">
      <svg width="1024" height="1024">
			  <defs>
					  <path id="deleteButtonPath" d="M 0 0 L 12 12 M 12 0 L 0 12"
						fill="none" stroke="#282828" stroke-width="7" stroke-opacity="0.5"
						onclick="console.log(this)">
							<!-- <animate attributeName="d" from="M 0 0 L 20 20 M 20 0 L 0 20"
							 to="M -2 -2 L 22 22 M 22 -2 L -2 22" 
							 begin="click" dur="0.05s" fill="freeze" />
							<animate attributeName="stroke-width" from="8" to="10" 
							 begin="click" dur="0.05s" fill="freeze" />
							<animate attributeName="stroke-opacity" from="0.5" to="1.0" 
							 begin="click" dur="0.05s" fill="freeze" />	-->
						
					 </path>
				 </symbol>
			  </defs>
				
        <rect class="box" x=-100 y=-100></rect>
        <rect class="item" x=-100 y=-100></rect>
        <g class="boxZone">
										
					<!-- <use x="100" y="100" xlink:href="#deleteButtonPath">
					</use> -->
				  <!-- <path id="closeButtonPath" d="M 0 0 L 20 20 M 20 0 L 0 20"
					fill="none" stroke="#282828" stroke-width="8" stroke-opacity="0.7"
					onclick="console.log(this)" x="100" y="100">
						<animate attributeName="d" from="M 0 0 L 20 20 M 20 0 L 0 20"
						 to="M -2 -2 L 22 22 M 22 -2 L -2 22" 
						 begin="mousedown" dur="0.05s" fill="freeze" />
						<animate attributeName="stroke-width" from="8" to="10" 
						 begin="mousedown" dur="0.05s" fill="freeze" />
						<animate attributeName="stroke-opacity" from="0.5" to="1.0" 
						 begin="mousedown" dur="0.05s" fill="freeze" />						
				 </path> -->
					
        </g>
      </svg>
  </div>
</template>

<template name="boxContainer">
	<p>(For now, hit reload after creating a new item. Also, you need to log in to create a new box.)</p>
  {{#if showcreateBoxDialog}}
    {{> createBoxDialog}}
  {{/if}}
	
  <div style="float: right">	
		{{loginButtons align="right"}}
	</div>
		
	<div class="boxContainer">
		{{> addItem }}
	  {{#each boxes}}
			{{! The box template object's methods will be executed in such a context
				that all of the Box model's properties, like _id and description, will 
				be available via this. Not sure why yet.
			}}
			{{> box }}
		{{/each}}	
	</div>
</template>

<template name="sumContainer">
  <div class="sumcontainer">Sum:  
		<span id="sum">{{sum}}</span>
  </div>
</template>

<template name="box">

  <div class="box">
				
  </div>

</template>

<template name="addItem">
  <div id="new-item-box">
    <input type="text" class="title" placeholder="New item" />
    <input type="text" class="description" placeholder="" />
    <input type="text" class="score" placeholder="0" />
    <input type="button" class="addNewItem" value="Add Item" />
  </div>
</template>	

<template name="item">
  <div class="item {{selected}}">
    <label class="name">{{title}}</label>
    <input class="score" size="3" value="{{score}}"></input>
  </div>
</template>

<template name="createBoxDialog">
  <div class="mask"> </div>
  <div class="modal">
    <div class="modalHeader">
      <button type="button" class="close cancel">&times;</button>
      <h3>Add box</h3>
    </div>

    <div class="modalBody">
      {{#if error}}
        <div class="alert alert-error">{{error}}</div>
      {{/if}}

      <label>Title</label>
      <input type="text" class="title span5">
    </div>

    <div class="modalFooter">
      <a href="#" class="btn cancel">Cancel</a>
      <a href="#" class="btn btn-primary save">Add Box</a>
    </div>
  </div>
</template>

<template name="newBoxButton">
	<div>
		<button type="button" class="close cancel">New Box</button>
	</div>
</template>
